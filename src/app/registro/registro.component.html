<!-- registro.component.html -->
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <h2 class="text-center mb-4">Registro de Paciente</h2>
      <form [formGroup]="registroForm" (ngSubmit)="onSubmit()">
        <div class="form-group mb-3">
          <label for="nombre">Nombre</label>
          <input type="text" id="nombre" class="form-control" formControlName="nombre" [class.is-invalid]="registroForm.get('nombre')?.invalid && registroForm.get('nombre')?.touched" />
          <div *ngIf="registroForm.get('nombre')?.invalid && registroForm.get('nombre')?.touched" class="invalid-feedback">
            El nombre es obligatorio.
          </div>
        </div>

        <div class="form-group mb-3">
          <label for="apellido">Apellido</label>
          <input type="text" id="apellido" class="form-control" formControlName="apellido" [class.is-invalid]="registroForm.get('apellido')?.invalid && registroForm.get('apellido')?.touched" />
          <div *ngIf="registroForm.get('apellido')?.invalid && registroForm.get('apellido')?.touched" class="invalid-feedback">
            El apellido es obligatorio.
          </div>
        </div>

        <div class="form-group mb-3">
          <label for="email">Email</label>
          <input type="email" id="email" class="form-control" formControlName="email" [class.is-invalid]="registroForm.get('email')?.invalid && registroForm.get('email')?.touched" />
          <div *ngIf="registroForm.get('email')?.invalid && registroForm.get('email')?.touched" class="invalid-feedback">
            Debe ingresar un correo electrónico válido.
          </div>
        </div>

        <div class="form-group mb-3">
          <label for="password">Contraseña</label>
          <input type="password" id="password" class="form-control" formControlName="password" [class.is-invalid]="registroForm.get('password')?.invalid && registroForm.get('password')?.touched" />
          <div *ngIf="registroForm.get('password')?.invalid && registroForm.get('password')?.touched" class="invalid-feedback">
            La contraseña debe tener al menos 6 caracteres.
          </div>
        </div>

        <div class="form-group mb-3">
          <label for="obraSocial">Obra Social</label>
          <select id="obraSocial" class="form-control" formControlName="obraSocialId" [class.is-invalid]="registroForm.get('obraSocialId')?.invalid && registroForm.get('obraSocialId')?.touched">
            <option value="" disabled selected>Seleccione una obra social</option>
            <option *ngFor="let obra of obrasSociales" [value]="obra.id">{{ obra.nombre }}</option>
          </select>
          <div *ngIf="registroForm.get('obraSocialId')?.invalid && registroForm.get('obraSocialId')?.touched" class="invalid-feedback">
            Seleccione una obra social.
          </div>
        </div>

        <button type="submit" class="btn btn-primary w-100" [disabled]="registroForm.invalid">Registrarse</button>
        
        <div *ngIf="errorMessage" class="alert alert-danger mt-3">{{ errorMessage }}</div>
        <div *ngIf="successMessage" class="alert alert-success mt-3">{{ successMessage }}</div>

        <div class="mt-3 text-center">
          <p>¿Ya tienes cuenta? <a routerLink="/login" class="link-primary">Inicia sesión aquí</a></p>
        </div>
      </form>
    </div>
  </div>
</div>
